---
lab: 4
title: 연습 3 - 데이터 손실 방지
---

# 랩 4 - 연습 3 - 데이터 손실 방지

Contoso Ltd.는 현재 Tailwind Traders를 프로젝트에 통합하고 있습니다. 합병은 아직 진행 중이며 두 회사는 별도의 테넌트 내에서 운영됩니다. Tailwind Traders 직원은 외부 사용자로 간주되며 SharePoint 사이트 및 파일 공유를 용이하게 하기 위해 Contoso 테넌트에 게스트로 초대됩니다. 특정 프로젝트의 경우 일부 선택된 Tailwind Traders 직원은 보안 감독을 유지하면서 내부 리소스에 대한 모든 액세스를 보장하기 위해 Contoso Ltd.에서 관리하는 Windows 11 클라이언트를 받게 됩니다. 관리되지 않는 디바이스에서는 M365 데스크톱 애플리케이션에 대한 액세스가 차단되며, 해당 사용자는 웹 애플리케이션을 통해서만 환경에 액세스할 수 있습니다. 관리되는 디바이스는 Endpoint Manager의 다양한 정책을 통해 보호됩니다. Contoso Ltd.는 중요한 문서를 포함된 정보의 유형에 따라 암호화하기 위해 Microsoft Purview Information Protection을 구현했습니다. 

사이버 보안 설계자는 최근 Defender for Cloud Apps 활동 로그에서 다양한 활동을 조사한 결과 기밀로 표시된 일부 문서가 외부 USB 드라이브에 복사되고 있음을 발견했습니다. 또한 사용자가 자신이 액세스할 수 있는 회사 데이터를 관리되지 않는 개인 디바이스에 자유롭게 저장할 수 있었습니다. 이로 인해 해결해야 하는 주요 문제가 발생합니다. 이에 대한 솔루션으로, 관리되지 않는 개인 디바이스에 회사 데이터를 저장하는 것을 제한하는 보안 정책을 설계해 보겠습니다. 이렇게 하면 중요한 데이터가 손상될 위험을 최소화하는 데 도움이 됩니다.

## 1부: 솔루션 설계(필수)

이 작업에서는 Contoso Ltd.가 직면한 위험을 해결하기 위한 개념을 설계합니다.

### 디자인 접근 방법

초기 단계에서는 설명된 문제에 따라 요구 사항을 분석하고, 목표를 이해하고, 요구 사항을 정의합니다.

제공된 사용 사례에 따라 다음 요구 사항을 설명할 수 있습니다.

- USB 드라이브로 데이터를 전송하는 것을 방지합니다.
- 관리되지 않는 디바이스에서 중요한 데이터에 액세스하는 행위를 제한합니다.
- 관리되지 않는 디바이스에서 중요한 데이터를 다운로드하는 행위를 차단합니다.

두 번째 단계에서는 Contoso Ltd.의 기존 환경을 검사합니다. Microsoft Purview 및 Microsoft Defender는 Microsoft Purview Information Protection, 데이터 손실 방지, 조건부 액세스, 보존 정책 등 데이터 흐름을 관리하기 위한 다양한 솔루션을 제공합니다. 이미 적용된 컨트롤을 조사합니다. 다양한 포털에 액세스하여 현재 구성 및 정책을 검토하고 조정이 필요한지 또는 새 설정/정책을 구현해야 하는지 확인합니다.

세 번째 단계에서는 솔루션 개념을 만드는 작업이 포함됩니다. 조사 결과 현재 정책이 정의된 요구 사항을 충족하지 않음이 밝혀졌습니다. 따라서 새 정책 집합이 필요합니다.

### 제안된 솔루션

관리되지 않는 개인 디바이스에 회사 데이터를 저장하는 것을 제한하는 보안 정책을 설계합니다. 이렇게 하면 중요한 데이터가 손상될 위험을 최소화하는 데 도움이 됩니다. 이 정책은 중요한 것으로 간주되는 데이터 유형과, 이를 저장할 수 있도록 허용할 디바이스를 포함해야 합니다. 또한 정책에서 외부 디바이스로 데이터를 안전하게 전송하기 위한 지침을 제공해야 합니다. 직원은 정책을 이해하며 이를 준수하겠다는 약속에 동의하는 계약에 서명해야 합니다. 정책은 모든 직원에게 전달되어야 하며, 비준수에 대한 정기적인 감사 및 징계 조치를 통해 적용되어야 합니다. 또한 직원이 개인 디바이스에 회사 데이터를 저장하는 것과 관련된 위험과 정책 준수의 중요성을 인식할 수 있도록 정기적인 교육 세션을 수행해야 합니다. 마지막으로 정책을 정기적으로 검토하고 업데이트하여 효과와 적절성을 유지해야 합니다. 

|요건|솔루션|작업 플랜:|
|----|----|----|
|데이터를 USB 드라이브로 옮기는 행위 차단|엔드포인트 데이터 손실 방지|중요 레이블이 있는 모든 데이터가 USB 드라이브에 복사되지 않도록 차단|
|관리되지 않는 디바이스에서 중요한 데이터에 액세스하는 행위 제한|Defender for Cloud Apps|관리되지 않는 디바이스의 데이터 복사/잘라내기/붙여넣기 차단|
|관리되지 않는 디바이스에서 중요한 데이터를 다운로드하는 행위 차단|Defender for Cloud Apps|관리되지 않는 디바이스의 데이터 다운로드 차단|

## 파트 2: 솔루션 구현(선택 사항)

### 작업 1: 데이터 손실 방지 정책 배포

솔루션 디자인의 첫 번째 단계는 엔드포인트에 대한 데이터 손실 방지 규칙을 만드는 것입니다. USB 드라이브로 데이터를 복사하는 행위를 차단하는 DLP 규칙을 배포해 보겠습니다. 

1. Microsoft Purview 규정 준수 포털 **https://compliance.microsoft.com**에 Allan Deyoung의 관리자 계정 **MOD Administrator**를 사용하여 로그인합니다.
1. 클래식 Microsoft Purview 규정 준수 포털로 다시 전환하라는 메시지가 표시되면 **전환**을 선택합니다.
1. Microsoft Purview 포털의 왼쪽 탐색 창에서 **데이터 손실 방지**를 펼친 다음 **정책**을 선택합니다.
1. **정책** 페이지에서 **+ 정책 만들기**를 선택합니다.
1. **템플릿으로 시작 또는 사용자 지정 정책 만들기** 페이지에서 **사용자 지정**, **사용자 지정 정책**을 선택한 후 **다음**을 선택합니다.
1. **DLP 정책 이름 지정** 페이지에서 이름과 설명을 입력하고 **다음**을 선택합니다.
1. **관리 단위 할당** 페이지에서 **다음**을 선택합니다.
1. **이 정책 적용 위치 선택** 페이지에서 **디바이스**만 선택하고 **다음**을 선택합니다.
1. **정책 설정 정의** 페이지에서 **다음**을 선택합니다.
1. **고급 DLP 규칙 사용자 지정** 페이지에서 **+ 규칙 만들기**를 선택합니다.
1. 규칙의 이름과 설명을 입력합니다. 
1. **조건**에서 **+ 조건 추가**를 선택한 다음 **다음이 포함된 콘텐츠**를 선택합니다.
1. 다음 조건을 지정합니다.

    - **다음이 포함된 콘텐츠**: 
      - **추가**를 선택한 다음 **민감도 레이블**을 선택하고 **신뢰할 수 있는 사람**, **프로젝트 - Falcon**, **기밀**, **극비**, **기밀 - 재무** 레이블을 선택합니다. **추가**를 클릭합니다.
13. **작업**에서 **+ 작업 추가**를 선택하고 **디바이스에서 활동 감사 또는 제한**을 선택합니다.
14. 다음 작업을 지정합니다.
   -    **모든 앱에 대한 파일 활동**에서 **특정 활동에 제한 적용**을 선택합니다.
      - **이동식 USB 디바이스로 복사**가 선택되어 있는지 확인하고 이 설정의 드롭다운 메뉴에서 **차단** 옵션을 선택합니다.
      - 다른 설정은 변경하지 말고 그대로 둡니다.
15. **저장**을 선택합니다.
16. **다음**을 선택합니다.
17. **정책 모드** 페이지에서 **즉시 정책 사용**을 선택합니다. **다음**을 선택합니다.
18.  **검토 후 완료** 페이지에서 **제출**을 선택합니다.

USB 드라이브로 데이터를 복사하는 행위를 모두 차단하는 데이터 손실 방지 규칙을 성공적으로 배포했습니다.

### 작업 2: 조건부 액세스 앱 제어에 애플리케이션 온보딩

솔루션의 일부는 Defender for Cloud Apps에서 세션 정책을 만드는 것입니다. 세션 정책은 세션의 실시간 모니터링을 통해 클라우드 애플리케이션에 대한 포괄적인 인사이트를 제공합니다. 이 정책을 사용하면 각 사용자 세션에 대해 지정된 정책에 따라 맞춤형 작업을 수행할 수 있습니다. 세션 정책을 만들려면 애플리케이션에 조건부 액세스 앱 제어를 배포해야 합니다. 조건부 액세스 앱 제어는 앱에 대한 실시간 모니터링 및 제어 기능을 추가합니다. 조건부 액세스 앱 제어에 앱을 온보딩하지 않고 세션 정책을 만들면 작동하지 않습니다. 첫 번째 단계는 보호하려는 애플리케이션을 조건부 액세스 앱 제어에 온보딩하는 것입니다. 

조건부 액세스 앱 제어에 애플리케이션을 온보딩하는 방법에는 두 가지가 있습니다.

- Microsoft Defender 포털에서 수동으로 애플리케이션 추가(설정 > 클라우드 앱 > 연결된 앱 > 조건부 액세스 앱 제어 앱)
- Defender for Cloud Apps로 앱을 보호하도록 조건부 액세스 정책 구성

조건부 액세스 정책은 정책에 지정된 모든 애플리케이션을 "Defender for Cloud Apps 조건부 액세스 앱 제어"로 전달합니다. 다음에 사용자가 지정된 애플리케이션에 로그온할 때 해당 애플리케이션이 조건부 액세스 앱 컨트롤에 자동으로 추가됩니다. 이 애플리케이션은 Microsoft Defender 포털에서 볼 수 있습니다. 
 
>**팁:** 이 작업을 시작하기 전에 기존 조건부 액세스 앱 제어 앱을 확인해야 합니다. 아직 온보딩된 애플리케이션이 없다는 것을 알 수 있습니다. 지금 단계에서는 Defender for Cloud Apps에서 세션 정책 만들기를 시도하고 발생하는 오류 메시지를 확인해 보세요.

이 작업에서는 Microsoft Entra에서 조건부 액세스 정책을 만들어 애플리케이션에 조건부 액세스 앱 제어를 배포합니다. 

1. Microsoft Entra 포털 **https://entra.microsoft.com**에 Allan Deyoung의 관리자 계정 **MOD Administrator**를 사용하여 로그인합니다.
2. Microsoft Entra 포털에서 **보호**를 펼쳐 **조건부 액세스**를 선택합니다.
3. **조건부 액세스 | 개요** 페이지에서 **정책**을 선택하고 **+ 새 정책**을 선택합니다.
4. 정책의 이름을 입력합니다.
5. **할당**에서 **사용자**를 선택하고 **모든 사용자**를 포함합니다.
6. **할당**에서 **대상 리소스**를 선택하고 **모든 클라우드 앱**을 포함합니다.
7. **액세스 제어**에서 **세션**을 선택합니다.
8. **세션** 창에서 **조건부 액세스 앱 제어 사용**을 선택하고 **사용자 지정 정책 사용...** 을 선택한 다음 **선택 단추**로 **세션** 창을 닫습니다.
9. **정책 사용**에서 **켜기**를 선택합니다.
10. 정책에서 현재 사용자를 제외하라는 경고가 표시되면 **이 정책으로 인해 내 계정에 영향을 미칠 수 있음을 이해합니다. 계속 진행합니다.** 를 선택합니다.
11. 필요에 따라 조건을 지정하고 컨트롤을 부여합니다.
12. **만들기**를 실행합니다.

이제 [Outlook](https://outlook.office365.com) 등 Microsoft 웹앱에 로그인합니다. 로그인하는 애플리케이션은 조건부 액세스 앱 제어에 자동으로 등록됩니다. Microsoft Defender 포털에 로그인하고 조건부 액세스 앱 제어에서 애플리케이션을 봅니다.

모든 애플리케이션을 Defender for Cloud Apps로, 온보딩된 앱을 조건부 액세스 앱 제어로 전달하는 조건부 액세스 정책을 성공적으로 만들었습니다.

### 작업 3: Defender for Cloud Apps에서 세션 정책 만들기

Defender for Cloud Apps에서 데이터 다운로드를 차단하고 관리되지 않는 디바이스에 대한 권한을 제한하는 두 가지 세션 정책을 만들어 보겠습니다.

1. 관리자 계정 **MOD Administrator**를 사용하여 Allan Deyoung으로 Microsoft Defender 포털 **https://security.microsoft.com**에 로그인합니다.
1. Microsoft Security 포털에서 **클라우드 앱** > **정책** > **정책 관리**를 선택합니다.
1. **정책** 페이지에서 **+ 정책 만들기** > **세션 정책**을 선택합니다.
1. **세션 정책 만들기** 페이지에서 **실시간 콘텐츠 검사에 따라 다운로드 차단** 정책 템플릿을 선택합니다.
1. 정책 이름을 입력합니다.
1. 정책 심각도 및 범주를 선택합니다.
1. 설명을 입력합니다.
1. **세션 제어 유형**에서 **파일 다운로드 제어(검사 사용)** 를 선택합니다.
1. **다음 항목 모두와 일치하는 활동** 섹션의 **활동 원본**에서 다음 필터를 선택합니다.

    - **디바이스 태그**: **같지 않음**을 선택하고 **Intune 규격**을 선택합니다.

10. **다음 항목 모두와 일치하는 파일** 섹션에서 다음 필터를 선택합니다.

    - **민감도 레이블**: **같음**을 선택하고 **Confidential**, **Highly Confidential**, **Confidential - Finance**를 선택합니다.

11. **검사 방법**에서 **데이터 분류 서비스**를 선택하고 **모든 항목**을 선택한 다음 **중요한 정보 유형...** 을 선택하고 이 정책을 적용할 중요한 정보 유형을 선택합니다.
12. **작업** 아래에서 **차단**을 선택합니다.
13. **만들기**를 선택하여 정책을 만듭니다.
14. 위에서 설명한 대로 두 번째 정책을 만들고 **실시간 콘텐츠 검사에 따라 잘라내기/복사 및 붙여넣기 차단** 정책 템플릿을 선택합니다.
15. **다음 항목 모두와 일치하는 활동** 섹션의 **활동 원본**에서 다음 정보를 입력합니다. 

    - **활동 유형**: **같음**을 선택하고 **항목 잘라내기/복사, 항목 붙여넣기**를 선택합니다.
    - **디바이스 태그**: **같지 않음**을 선택하고 **Intune 규격**을 선택합니다.

16. **콘텐츠 검사 사용**을 사용하지 않도록 설정하고 **만들기**를 선택하여 정책을 만듭니다.

Defender for Cloud Apps에서 세션 정책 두 가지를 성공적으로 만들었습니다.
